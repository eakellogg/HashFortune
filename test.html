<html>

<script src = "./amcharts/*.js"></script>
<script src= "/socket.io/socket.io.js"></script>

<script src="amcharts/amcharts.js" type="text/javascript"></script>
<script src="amcharts/serial.js" type="text/javascript"></script>

<body>
    <div id="chartdiv" style="width: 640px; height: 400px;"></div>
</body>

<script type="text/javascript">

/*
	var chartData = [{
		"country": "USA",
		"visits": 4252
	}, {
		"country": "China",
		"visits": 1882
	}, {
		"country": "Japan",
		"visits": 1809
	}, {
		"country": "Germany",
		"visits": 1322
	}, {
		"country": "UK",
		"visits": 1122
	}, {
		"country": "France",
		"visits": 1114
	}, {
		"country": "India",
		"visits": 984
	}, {
		"country": "Spain",
		"visits": 711
	}, {
		"country": "Netherlands",
		"visits": 665
	}, {
		"country": "Russia",
		"visits": 580
	}, {
		"country": "South Korea",
		"visits": 443
	}, {
		"country": "Canada",
		"visits": 441
	}, {
		"country": "Brazil",
		"visits": 395
	}, {
		"country": "Italy",
		"visits": 386
	}, {
		"country": "Australia",
		"visits": 384
	}, {
		"country": "Taiwan",
		"visits": 338
	}, {
		"country": "Poland",
		"visits": 328
	}];
*/

AmCharts.ready(function() {


var socket = io.connect('http://' + document.location.host);
var chartData;
socket.on( 'welcome' , function( message )
	{
		socket.emit("chart_request" , {} );
	});
socket.on( 'chart_data' , function (message) 
{

chartData = message;
var chart = new AmCharts.AmSerialChart();
chart.dataProvider = chartData;
chart.categoryField = "time";


var chartScrollbar = new AmCharts.ChartScrollbar();
chart.addChartScrollbar(chartScrollbar);

var graph = new AmCharts.AmGraph();
graph.valueField = "count";
graph.type = "line";
chart.addGraph(graph);

var categoryAxis = chart.categoryAxis;
categoryAxis.autoGridCount  = true;
categoryAxis.gridPosition = "start";
categoryAxis.labelRotation = 90;

graph.type = "line";
graph.fillAlphas = 0; // or delete this line, as 0 is default
//graph.bullet = "round";
//graph.lineColor = "#8d1cc6"

chart.write('chartdiv');
	
});




});
</script>


</html>